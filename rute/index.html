<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Graph Rute Bus Solo Trans</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    #map {
      height: 100%;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    const halteData = [
      { id: "H01", name: "Jurug (Solo Safari)", lat: -7.56513474408024, lon: 110.858685876169, routes: ["K1", "FD2"] },
      { id: "H02", name: "UNS", lat: -7.56455236195493, lon: 110.8561722718, routes: ["K1"] },
      { id: "H03", name: "Vastenburg", lat: -7.57175743180982, lon: 110.8297470581, routes: ["K1"] },
      { id: "H04", name: "Gladag", lat: -7.57203341152584, lon: 110.827739168751, routes: ["K1"] },
      { id: "H05", name: "Pasar Pon Selatan", lat: -7.57053451729552, lon: 110.822770250784, routes: ["K1"] },
      { id: "H06", name: "Sriwedari 1 Selatan", lat: -7.56729936753916, lon: 110.812057143543, routes: ["K1", "FD8"] },
      { id: "H07", name: "Sriwedari 2 Selatan", lat: -7.56795480396892, lon: 110.814320671231, routes: ["K1", "FD8"] },
      { id: "H08", name: "Colomadu Utara", lat: -7.53253942382143, lon: 110.748923594566, routes: ["K1"] },
      { id: "H09", name: "Tugu Lilin", lat: -7.567581219, lon: 110.7835961, routes: ["K3"] },
      { id: "H10", name: "Vestenburg (Kantor Pos)", lat: -7.57140133360988, lon: 110.829647652826, routes: ["K3"] },
      { id: "H11", name: "Balai Kota", lat: -7.56993057310902, lon: 110.830046989632, routes: ["K3", "FD2"] },
      { id: "H12", name: "Pasar Gede", lat: -7.5684698254206, lon: 110.831727375632, routes: ["K3"] },
      { id: "H13", name: "Solo Techno Park", lat: -7.55653679470118, lon: 110.852209973442, routes: ["K3"] },
      { id: "H14", name: "Kantor Kecamatan Jebres", lat: -7.55541900174376, lon: 110.854977935521, routes: ["K3"] },
      { id: "H15", name: "Halte RS Jiwa / Taman Lansia", lat: -7.55707042819373, lon: 110.860610255225, routes: ["K3"] },
      { id: "H16", name: "Halte Kecamatan Colomadu", lat: -7.532634345, lon: 110.7487969, routes: ["K4"] },
      { id: "H17", name: "Stadion Manahan", lat: -7.556663684, lon: 110.8048193, routes: ["K4"] },
      { id: "H18", name: "Terminal Tirtonadi", lat: -7.551298569, lon: 110.8182099, routes: ["K4", "K6"] },
      { id: "H19", name: "Ngapeman", lat: -7.568500872, lon: 110.8166443, routes: ["K5", "FD8"] },
      { id: "H20", name: "Sriwedari", lat: -7.567047482, lon: 110.8118452, routes: ["K5"] },
      { id: "H21", name: "Landasan Udara (Pasar Colomadu)", lat: -7.53171343, lon: 110.7473448, routes: ["K5", "FD7"] },
      { id: "H22", name: "Ngarsopuro", lat: -7.569086355, lon: 110.8221284, routes: ["K6"] },
      { id: "H23", name: "Pasar Kembang", lat: -7.571950677, lon: 110.8166645, routes: ["K6"] },
      { id: "H24", name: "Sriwedari 2 Utara", lat: -7.567852615, lon: 110.8146095, routes: ["FD2", "FD8"] },
      { id: "H25", name: "Museum Keris B", lat: -7.568829291, lon: 110.8106188, routes: ["FD8"] },
      { id: "H26", name: "Mangkunegaran", lat: -7.567624751, lon: 110.8220978, routes: ["FD9"] },
      { id: "H27", name: "Sahid", lat: -7.564166826, lon: 110.8185673, routes: ["FD8", "FD9"] },
      { id: "H28", name: "Pasar Klewer", lat: -7.575037806, lon: 110.8264383, routes: ["FD10"] },
      { id: "H29", name: "Pasar Pucang Sawit A", lat: -7.567996022, lon: 110.8582507, routes: ["FD10"] },
    ];

    const routeColors = {
      "K1": "#FF6B6B",
      "K3": "#4ECDC4",
      "K4": "#45B7D1",
      "K5": "#96CEB4",
      "K6": "#FECA57",
      "FD2": "#FF9FF3",
      "FD7": "#54A0FF",
      "FD8": "#5F27CD",
      "FD9": "#00D2D3",
      "FD10": "#FF9F43"
    };

    function getEdges(halteList) {
      const edges = [];
      const seen = new Set();
      for (let i = 0; i < halteList.length; i++) {
        for (let j = i + 1; j < halteList.length; j++) {
          const h1 = halteList[i];
          const h2 = halteList[j];
          const commonRoutes = h1.routes.filter(r => h2.routes.includes(r));
          if (commonRoutes.length > 0) {
            const key = [h1.id, h2.id].sort().join("-");
            if (!seen.has(key)) {
              edges.push({
                from: h1,
                to: h2,
                route: commonRoutes[0]
              });
              seen.add(key);
            }
          }
        }
      }
      return edges;
    }

    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 13,
        center: { lat: -7.565, lng: 110.82 },
      });

      halteData.forEach(halte => {
        new google.maps.Marker({
          position: { lat: halte.lat, lng: halte.lon },
          map: map,
          title: halte.name
        });
      });

      const edges = getEdges(halteData);
      edges.forEach(edge => {
        new google.maps.Polyline({
          path: [
            { lat: edge.from.lat, lng: edge.from.lon },
            { lat: edge.to.lat, lng: edge.to.lon }
          ],
          geodesic: true,
          strokeColor: routeColors[edge.route] || "#000000",
          strokeOpacity: 0.8,
          strokeWeight: 3,
          map: map
        });
      });
    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBNP8FHeEcVL0SpwNhN62MgymlA0Gq7bV4&callback=initMap">
  </script>
</body>
</html>